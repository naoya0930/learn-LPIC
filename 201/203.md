# システムの起動
### システム起動プロセス
#### ブートからカーネルの起動まで
- BIOS + MBR(マスターブートレコード)
  - BIOSはマザーボード上、MBRはディスクの最初の512byte
  - メモリのチェック
  - ハードウェアの設定の読み込み
  - 起動デバイスのチェック
  - 起動デバイスのマスターブートレコード内のブートローダを実行
  - MBR内にパーティション情報がある
- UEFI + ESP
  - UEFIはマザーボード上。ESPはディスク上にある
  - ESPは100MBを超えることもある。
  - CSM(Compatibillity Support Module)
    - UEFIでBIOSのような挙動を実現する
  - ESP(EFI system partition)
    - EFI(Estensible Firmware Interface)が存在するパーティションのこと
      - .efiファイル
    - ブートローダ、ファームウェア、設定ファイル、ドライバ
    - ESPにはEFI以外は含めないことが多い
- GPT
  - GUID Partition Table
  - UEFI環境のパーティション定義フォーマット
    - なのでboot用途以外のディスクにもGPT情報は記述される
  - 2TBを超えるディスクをマウントする場合はこちらを採用
  - それぞれの物理ディスクの最初と最後に入っている
  - 初回起動時は、「EFI System partition」のGUIDをUEFIが見つける
### ブートローダ(MBR)
- 第一段階のブートローダはMBR内にある
- 第二段階として、GRUB、GRUB2が起動する
### ブートローダ(UEFI+ESP)
- 第一段階のブートローダはEFI
- 第二段階として、GRUBやGRUB2がある
- 第一段階はファームウェア、第二段階はOSに依存する
### カーネル
- GURBに呼ばれるやつ
- linux/windowsなど
- OSの基礎処理、ドライバの初期化
- ルートファイルシステムもこれより後段で認識する
### 初期プロセス
- Upstart,systemd,SysVinit,runinit,OpenRCなど
- カーネルパラメータのinitによって指定されるプロセス
- ☆ IoT機器とかは、これの初期プロセスが別に指定されている

#### MBRがカーネルの無いディスクを初期起動ディスクとして指定するとどうなる？
- カーネルが見つからず、エラーになる。
- MBRにおいて必須なディレクトリ
  - /bin,/sbin...カーネルなどが使用するプログラム
  - /etc...各種設定
  - /lib...ライブラリ
  - /dev...デバイスファイル
  - もちろんカーネル(/boot)も同じディスク



### SysVinit
### 起動スクリプトとランレベル
### サービスの自動起動
### update-rc.d

### systemd

### systemctl


### Unit設定ファイル


### systemd ログ

# ブートローダ

### GRUB
### GRUB2
### 起動オプションの設定
### システムの回復

## その他のブートローダ
### SYSLINUX
### PXEブート
###

# webサーバ、プロキシサーバ

### Apache
- ここでの文脈はほとんどApache HTTP Serverのこと
- 
- 2.0系からMulti-processing Moduleを採用
  - リクエストをプロセス、スレッド、イベントのどの手順で捌くかを設定
  - prefork...プロセスを新規で起こす
  - worker...スレッドを新規で起こす
  - event...Keep Aliveを非同期にする
- IPv6の対応も2.0系から

### Apache HTTPの設定
- `httpd.conf`で設定
- ディストリビューションによって配置は様々
- 配置
  - RHEL/CentOS
    - `/etc/httpd/conf/httpd.conf`
  - Debian/Ubuntu
    - `/etc/apache2/apache2.conf`
### 設定ファイルの用語
- ディレクティブ
  - 設定の単位
- コンテキスト
  - ディレクティブが使用できる場所
  - 各ディレクティブによって有効なコンテキストが存在する
- 仮想環境
  - 1台のApache、1つのIP/Port、複数のHTTPSサイトを実現する論理的な分離
  - ServerName/SNI(Server Name Indication)

### SNI(Server Name Indicaton)って何？
- L4の話。
- TSLするための証明書の発行単位がドメイン(IPでない)ために発生する
- クライアントの対応が必須
- サーバ側で使用する証明書、対応するHTTPS仮想ホストを選択

### 主要なディレクティブ